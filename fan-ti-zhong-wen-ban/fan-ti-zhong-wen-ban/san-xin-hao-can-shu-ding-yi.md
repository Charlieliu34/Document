# 叁、信號參數定義

## 一、MC回測模板

> **@ DVC5\_PassEq\_Chart： 將自定義策略的績效進行多空拆解，多空個別評價，於圖表上使用。**

1. Strategy： 

    該商品之策略編號，從數字1起依序向上編號。不同商品皆須從1開始編號，不可混合接續編號。 



> **@ DVC5\_PassEq： 將自定義策略的績效進行多空拆解，多空個別評價，於PT上使用。**

\*\*\*\*

> **@ DVC5\_OriginalMM： 輸出原始策略組合之業績。**

1.  CapitalName： **** 原始策略組合之權益曲線名稱，命名規則為“ UD.MCQuote.xxx”，其中xxx為自定義字串。
2.  RealCapital：

   實際交易使用的資金底層。



> **@ DVC7\_Set： 計算評分函數＆風險平價手數信號。**

1. Lookbackdays：  動能觀察天期，選擇區間大小影響範圍變化對給分的敏感程度，選擇越小的觀察區間，持續短時間的移動對動能給分影響範圍。
2. NegLeverge：

   是否使用負動能反向模式，設置1為開啟，0為關閉。

3.  WithSpread：

   考慮新舊合約在轉倉時，其因為換月所造成的價差跳空非屬正常交易行為，容易造成回測失真，因此可透過此參數來修正持倉損益。

4.  StrategyChannel：

   策略類別編號，比方雙邊策略都設定為1，當衝策略都設定為2，需為大於0之整體。

5.  StrategyChannelLimit：

   該策略類別開放整合之策略總數上限，如設定5，代表該策略類別取分數前5名的策略進行整合，注意相同編號的策略類別，此上限都須設置一樣。

6.  pCapital：

   合理計算風險平價手數的涉險金額，替代按此值的5％進行每筆投資，涉險金額設定重置，每個商品的風險評估手數替代。

7.  RPLen：

   波動率觀察天期，可以計算風險評價手數。

8.  VolType：

   波動率採用的計算方式，設置1為標準差，2為ATR，可以計算風險評估手數。

9. PositionWeight

   該策略之下單權重，供使用者調整策略間之下單比例。



> **@ DVC7\_Order： 策略評分整合和下單信號。**

1.  pCapital：

   該商品下單之之參考資金，與資金基板搭配進行比例式下單，建議設定一個相對相對的數值，如10000000。

2.  CommodityChannel：

   商品類別編號，比方指數期貨都設定為1，農產品期貨都設定為2，需為大於0之整數。

3.  CommodityChannelLimit：

   該商品類別開放交易之商品總數上限，如設定3，代表該商品類別取總評分前3名的商品進行交易。

4.  StrategyTotalN：

   該商品開放整合之策略總數上限，如設定12，代表該商品的策略池中，至多取12名策略進行整合。

5.  StrategyScoreThres：

   策略評分門情報，評分高於此值才有資格進入合併列表。

6.  WithSpread：

   考慮新舊合約在轉倉時，其因為換月所造成的價差跳空非屬正常交易行為，容易造成回測失真，因此可透過此參數來修正持倉損益。



> **@ DVC7\_XeusMM： 商品管理信號。**

1.  CommodityTotalN：

   開放交易之商品總計上限，如設定15，代表整個投資組合至多交易15個商品。

2.  ChangeThres：

   商品總評分有效變量，當商品已定倉，並且總評分變化超過此值，才進行加減碼手數調整。有效變量設置更改，可避免策略影響雜訊而不斷進出。

3.  CommodityScoreThres：

   商品總評分門情報，當總評分超過此門情報，才開放該商品交易進場，並且在此門生物學之上，評分有效變量機制才會啟用。

4.  CapitalName：

   評價後之權益曲線名稱，命名規則為“ UD.MCQuote.xxx”，其中xxx為自定義字串。

5.  RealCapital：

   實際交易使用的資金基礎，與參考資金搭配進行比例式下單，建議設置一個相對參考資金較小的數值，如2000000。

6.  PosSize：

   資金槓桿參數，此值設定範圍，涉險金額與局部規模也可能。

7.  IncWeight：

   即時損益再支出比例，將即時損益劃分加上減碼部分之比例，輸入0代表不使用此條件。

8.  IncLimit：

   損益權重分配之上限。

9.  MaxLossPercent：

   策略最大百分比，如果當前浮動損益達到此值則強制平倉。以百分比表示，輸入5代表5％，輸入0代表不使用此條件。

10. RiskTakeType：  動用風險模式選擇，可行控管新策略是否進場
    * 輸入0：_關閉，對於新進場項目沒有任何限制。_
    * 輸入1：如果舊有地方加倉或新策略加入後會超過風險上限，則限制加倉或新策略加入。
11.  RiskTakenLimit：

    動用風險上限。

12. NonProtect：

    未受保護商品數，為無限加倉保護墊級距限制的最大信號數量。

13.  ProtectPad：

    加倉保護墊級距，當持倉商品數超過非保護但尚未達到商品總數N，則隨後每增加一個商品，就會增加一個保護墊。

    例如，NonProtect = 4（個），CommodityTotalN = 6（個），ProtectPad = 50000，

    則當第5個商品要進來，需要前4個商品浮動損益到達ProtectPad = 50000，

    當第6個商品要進來需要前5個商品浮動損益到達2  _ProtectPad = 2_  50000 = 100000

  ****

> **AutoLeverage： 自動調整槓桿與可用資金規模。**

1.  Len：

   模擬資金曲線之觀察天期，某種可用於計算權益曲線之波動率，布林通道等。

2. mainleverage:

   資金槓桿水位，可根據自定義演算法調整，來達到槓桿規模。

3.  ReinvestmentDelta：

   可用資金比例比例，以百分比表示，輸入5代表5％，則當可用資金增長至105％（95％）時，可以使用可用資金更新至當前數值，進行資金縮放，輸入0代表不使用此條件。

## 二、MC與評價大師實盤模板

> **@ DVC7\_ToDaVinci： 評分函數及風險平價口數信號，掛載於圖表或PT皆可使用。**

1. Lookvackdays：

   動能觀察天期，選擇區間大小影響連續變化對給分的敏感程度，選擇越小的觀察區間，導致短時間的移動對動能給分影響程度。

2. NegLeverage：

   是否使用負動能反向模式，設置1為開啟，0為關閉。

3.  WithSpread：

   考慮新舊合約在轉倉時，其因為換月所造成的價差跳空非屬正常交易行為，容易造成損益計算失真，因此可透過此參數來修正持倉損益。

4.  StrategyChannel：

   策略類別編號，比方雙邊策略都設定為1，當衝策略都設定為2。

5. StrategyName：

   由MC輸出至評估大師所顯示的策略名稱，以兩個雙引號所涵蓋的文字格式，如“ MACD-L”。每個策略請輸入不同的名稱，如有同策略但周期或參數不同，請加上其他文字或編號以供區隔，如“ MACD-L1”，“"MACD-L2"。

6. pCapital: 該商品下單之參考資金，與資金基底搭配進行比例式下單，建議設定一個相對較大的數值，如10000000，注意此值須與評價大師中的參考資金設定相同。 
7. RPLen:  波動率觀察天期，用以計算風險評價手數。 
8. VolType:  波動率採用的計算方式，設定1為標準差，2為ATR，用以計算風險評價手數。 
9. PositionWeight:  該策略之下單權重，供使用者調整策略間之下單比例。 

